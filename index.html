<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Entrevistas - Varejo</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“‹ Sistema de Entrevistas - Varejo</h1>
            <p class="subtitle">AvaliaÃ§Ã£o de candidatos para Operacional e Gerente de Loja</p>
            <button id="toggleDarkMode" class="btn-theme-toggle" title="Alternar Modo Escuro">
                ğŸŒ™
            </button>
        </header>

        <div class="tabs">
            <button class="tab-btn active" data-tab="entrevista">ğŸ¯ Nova Entrevista</button>
            <button class="tab-btn" data-tab="agenda">ğŸ“… Agenda</button>
            <button class="tab-btn" data-tab="historico">ğŸ“Š HistÃ³rico</button>
            <button class="tab-btn" data-tab="relatorio">ğŸ“„ RelatÃ³rio PDF</button>
            <button class="tab-btn" data-tab="estatisticas">ğŸ“ˆ EstatÃ­sticas</button>
            <button class="tab-btn" data-tab="configuracoes">âš™ï¸ ConfiguraÃ§Ãµes</button>
        </div>

        <!-- ABA: NOVA ENTREVISTA -->
        <div class="tab-content active" id="tab-entrevista">
            <div class="app-container">
                <div class="card">
                    <h2>ğŸ‘¤ InformaÃ§Ãµes da Entrevista</h2>
                    <form id="formEntrevista">
                        <div class="form-group">
                            <label for="candidatoNome">Nome do Candidato *</label>
                            <input type="text" id="candidatoNome" required placeholder="Nome completo do candidato">
                        </div>

                        <div class="form-group">
                            <label for="cargo">Selecione o Cargo *</label>
                            <select id="cargo" required>
                                <option value="">Escolha um cargo...</option>
                                <!-- Cargos carregados via JavaScript -->
                            </select>
                        </div>

                        <div id="cargoInfo" class="cargo-info hidden">
                            <div class="cargo-info-header">
                                <h3><span id="cargoNomeSelecionado"></span></h3>
                                <div class="cargo-detalhes">
                                    <span>ğŸ“ <span id="totalPerguntas">0</span> perguntas</span>
                                    <span>â±ï¸ <span id="cargoDuracao"></span></span>
                                </div>
                            </div>
                            
                            <div class="cargo-script">
                                <div class="script-item"><strong>ğŸ’° SalÃ¡rio:</strong> <span id="cargoSalario"></span></div>
                                <div class="script-item"><strong>ğŸ BenefÃ­cios:</strong> <span id="cargoBeneficios"></span></div>
                                <div class="script-item"><strong>â° HorÃ¡rio:</strong> <span id="cargoHorario"></span></div>
                            </div>

                            <button type="button" class="btn-secondary btn-small" onclick="alterarCargo()">
                                Alterar Cargo
                            </button>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="dataEntrevista">Data *</label>
                                <input type="date" id="dataEntrevista" required>
                            </div>
                            <div class="form-group">
                                <label for="horaEntrevista">Hora *</label>
                                <input type="time" id="horaEntrevista" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="vagaInhire">Nome da Vaga no InHire</label>
                            <input type="text" id="vagaInhire" placeholder="Ex: Gerente de Loja - Rio de Janeiro">
                        </div>

                        <div class="form-group">
                            <label for="entrevistador">Entrevistador *</label>
                            <input type="text" id="entrevistador" required placeholder="Seu nome">
                        </div>

                        <div class="form-group">
                            <label for="localEntrevista">Local da Entrevista</label>
                            <select id="localEntrevista">
                                <option value="">Selecione...</option>
                                <option value="presencial">Presencial</option>
                                <option value="online">Online</option>
                            </select>
                        </div>

                        <div class="acoes-agendamento">
                            <button type="button" class="btn btn-google" onclick="agendarGoogleCalendar()">
                                ğŸ“… Agendar no Google
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="salvarAgendamento()">
                                ğŸ’¾ Salvar na Agenda
                            </button>
                        </div>
                        
                        <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">

                        <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 10px;">
                            â–¶ï¸ Iniciar Entrevista Agora
                        </button>
                    </form>
                </div>

                <div class="card">
                    <h2>ğŸ“ Respostas e AvaliaÃ§Ã£o</h2>
                    <div id="perguntasContainer" class="perguntas-container">
                        <div class="no-data">
                            Selecione um cargo para visualizar as perguntas da entrevista
                        </div>
                    </div>

                    <div class="avaliacao-section">
                        <h3>ğŸ“Š AvaliaÃ§Ã£o por CompetÃªncia</h3>
                        <div id="avaliacaoContainer">
                            <!-- AvaliaÃ§Ãµes carregadas dinamicamente -->
                        </div>

                        <div class="form-group">
                            <label for="pontosFortes">Pontos Fortes do Candidato</label>
                            <textarea id="pontosFortes" placeholder="Liste os principais pontos positivos observados..."></textarea>
                        </div>

                        <div class="form-group">
                            <label for="pontosMelhorar">Pontos a Melhorar</label>
                            <textarea id="pontosMelhorar" placeholder="Ãreas que precisam de desenvolvimento..."></textarea>
                        </div>

                        <div class="form-group">
                            <label for="observacoes">ObservaÃ§Ãµes Gerais</label>
                            <textarea id="observacoes" placeholder="AnotaÃ§Ãµes adicionais sobre a entrevista..."></textarea>
                        </div>

                        <div class="form-group">
                            <label>AvaliaÃ§Ã£o Final</label>
                            <div class="radio-group">
                                <label class="radio-option">
                                    <input type="radio" name="status" value="aprovado">
                                    <span class="radio-label">âœ… Aprovado</span>
                                </label>
                                <label class="radio-option">
                                    <input type="radio" name="status" value="reprovado">
                                    <span class="radio-label">âŒ Reprovado</span>
                                </label>
                                <label class="radio-option">
                                    <input type="radio" name="status" value="analise" checked>
                                    <span class="radio-label">â³ Em AnÃ¡lise</span>
                                </label>
                                <label class="radio-option">
                                    <input type="radio" name="status" value="faltou">
                                    <span class="radio-label">ğŸš« Faltou</span>
                                </label>
                            </div>
                        </div>

                        <button type="button" class="btn btn-success" onclick="salvarEntrevista()" style="width: 100%;">
                            ğŸ’¾ Salvar Entrevista Completa
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ABA: AGENDA -->
        <div class="tab-content" id="tab-agenda">
            <div class="card">
                <div class="card-header">
                    <h2>ğŸ“… Agenda de Entrevistas</h2>
                </div>
                <div id="agendaContainer" class="agenda-container">
                    <!-- Agenda carregada via JS -->
                </div>
            </div>
        </div>

        <!-- ABA: HISTÃ“RICO -->
        <div class="tab-content" id="tab-historico">
            <div class="card">
                <div class="card-header">
                    <h2>ğŸ“Š HistÃ³rico de Entrevistas</h2>
                    <div class="search-container">
                        <input type="text" id="buscarEntrevista" placeholder="ğŸ” Buscar por nome...">
                        <select id="filtroCargoHistorico">
                            <option value="">Todos os Cargos</option>
                        </select>
                        <input type="date" id="filtroDataInicio" title="Data Inicial">
                        <input type="date" id="filtroDataFim" title="Data Final">
                        <select id="filtroStatus">
                            <option value="">Todos status</option>
                            <option value="aprovado">Aprovados</option>
                            <option value="reprovado">Reprovados</option>
                            <option value="analise">Em anÃ¡lise</option>
                            <option value="agendado">Agendados</option>
                            <option value="faltou">Faltou</option>
                        </select>
                    </div>
                </div>

                <div class="entrevistas-lista" id="listaEntrevistas">
                    <!-- Entrevistas carregadas dinamicamente -->
                </div>
            </div>
        </div>

        <!-- ABA: RELATÃ“RIO PDF -->
        <div class="tab-content" id="tab-relatorio">
            <div class="card">
                <h2>ğŸ“„ Gerar RelatÃ³rio PDF</h2>
                
                <div class="form-group">
                    <label for="selecionarEntrevistaRelatorio">Selecionar Entrevista</label>
                    <select id="selecionarEntrevistaRelatorio">
                        <option value="">Escolha uma entrevista...</option>
                    </select>
                </div>

                <div id="relatorioPreview" class="relatorio-preview hidden">
                    <!-- Preview do relatÃ³rio -->
                </div>

                <div class="acoes-relatorio" id="acoesRelatorio">
                    <button class="btn btn-pdf" onclick="gerarPDF()" disabled>
                        ğŸ“¥ Gerar PDF
                    </button>
                    <button class="btn btn-secondary" onclick="imprimirRelatorio()" disabled>
                        ğŸ–¨ï¸ Imprimir
                    </button>
                </div>
            </div>
        </div>

        <!-- ABA: ESTATÃSTICAS -->
        <div class="tab-content" id="tab-estatisticas">
            <div class="card">
                <h2>ğŸ“ˆ EstatÃ­sticas do Processo Seletivo</h2>
                
                <div class="stats-container">
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ“‹</div>
                        <div class="stat-number" id="totalEntrevistas">0</div>
                        <div class="stat-label">Total de Entrevistas</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">âœ…</div>
                        <div class="stat-number" id="totalAprovados">0</div>
                        <div class="stat-label">Aprovados</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">âŒ</div>
                        <div class="stat-number" id="totalReprovados">0</div>
                        <div class="stat-label">Reprovados</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">ğŸš«</div>
                        <div class="stat-number" id="totalFaltou">0</div>
                        <div class="stat-label">Faltou</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ“Š</div>
                        <div class="stat-number" id="taxaAprovacao">0%</div>
                        <div class="stat-label">Taxa de AprovaÃ§Ã£o</div>
                    </div>
                </div>

                <div class="chart-container">
                    <h3>ğŸ“ˆ DistribuiÃ§Ã£o por Cargo</h3>
                    <div id="chartCargos" class="chart"></div>
                </div>

                <div class="chart-container">
                    <h3>ğŸ“… Entrevistas por MÃªs</h3>
                    <div id="chartMensal" class="chart"></div>
                </div>

                <div class="ultimas-entrevistas">
                    <h3>ğŸ• Ãšltimas Entrevistas</h3>
                    <div id="listaUltimasEntrevistas"></div>
                </div>
            </div>
        </div>

        <!-- ABA: CONFIGURAÃ‡Ã•ES (BACKUP) -->
        <div class="tab-content" id="tab-configuracoes">
            <div class="card">
                <h2>âš™ï¸ Gerenciamento de Dados</h2>
                <p>FaÃ§a o backup dos seus dados ou restaure de um arquivo salvo anteriormente.</p>
                
                <div class="backup-actions">
                    <div class="backup-card">
                        <h3>ğŸ“¤ Exportar Dados</h3>
                        <p>Baixe um arquivo JSON com todo o histÃ³rico de entrevistas.</p>
                        <button class="btn btn-primary" onclick="exportarDados()">Baixar Backup</button>
                    </div>
                    
                    <div class="backup-card">
                        <h3>ğŸ“¥ Importar Dados</h3>
                        <p>Restaure entrevistas de um arquivo de backup (substitui ou mescla).</p>
                        <input type="file" id="arquivoBackup" accept=".json" style="margin-bottom: 10px;">
                        <button class="btn btn-secondary" onclick="importarDados()">Restaurar Backup</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- MODAL DE DETALHES -->
        <div id="modalDetalhes" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Detalhes da Entrevista</h3>
                    <button class="close-modal" onclick="fecharModal()">&times;</button>
                </div>
                <div class="modal-body" id="modalDetalhesConteudo">
                    <!-- ConteÃºdo carregado dinamicamente -->
                </div>
            </div>
        </div>

        <!-- MODAL DE CONFIRMAÃ‡ÃƒO -->
        <div id="modalConfirmacao" class="modal">
            <div class="modal-content modal-sm">
                <div class="modal-body">
                    <p id="mensagemConfirmacao"></p>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="fecharModalConfirmacao()">Cancelar</button>
                    <button class="btn btn-danger" id="btnConfirmarAcao">Confirmar</button>
                </div>
            </div>
        </div>
    </div>

    <script src="cargos.js"></script>
    <script src="script.js"></script>
</body>
</html>